
<script type="text/javascript" src="~/Scripts/ControladorasAngular/controller-RECLA-RegistroFichaController.js"></script>
@*<script type="text/javascript" src="/Scripts/ControladorasAngular/controller-RECLA-AgregarMantenimiento.js"></script>*@
<script type="text/javascript" src="~/Scripts/ControladorasAngular/controller-RECLA-BuscarMantenimiento.js"></script>
<script type="text/javascript" src="/Scripts/ControladorasAngular/controller-RECLA-BuscarSolicitarMantenimiento.js"></script>
<script type="text/javascript" src="~/Scripts/ControladorasAngular/controller-RECLA-BuscarActividades.js"></script>
<script type="text/javascript" src="~/Scripts/ControladorasAngular/controller-RECLA-BuscarMateriales.js"></script>
<div id="ContenedorBody" style="width: 100%; clear: both; position: static; zoom: 1;">
    <div>
        <div id="centroPagina" class="currentPageClass col-md-12 wrapper  wrapperMediano" style="padding-top: 0px !important; padding-bottom: 0px !important; border: 0px !important; position: relative">
            <div class="contenido clearfix ng-view ng-scope" style="border: 1px solid #0E75B5;">
                <div class="block ng-scope" style="">
                    <div ng-app="api" ng-controller="RegistroFichaController" class="ng-scope">
                    <div id="seccion-1">
                            <div class="block_menu">
                                <div>
                                    <div style="max-width: 100%; height: 100%">
                                        <div class="boton ng-hide" ng-show="FlagMostrarBotonGuardar">
                                            <button id="btnGuardar" class="SeparatorLeft boton1Style boton1" style="">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnGuardar" alt="Guardar" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Guardar</span>
                                            </button>

                                        </div>
                                        <div class="boton ng-hide" ng-show="FlagMostrarBotonCrear">
                                            <button class="SeparatorLeft boton1Style boton1" ng-Click="Crear_Click();" style="">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnGuardar" alt="Crear" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Crear</span>
                                            </button>
                                        </div>
                                        <div class="boton ng-hide" ng-show="FlagMostrarBotonModificar">
                                            <button class="SeparatorLeft boton1Style boton1" ng-Click="Modificar_Click();" style="">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnModificar" alt="Modificar" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Modificar</span>
                                            </button>
                                        </div>

                                        <div class="boton ng-hide" ng-show="FlagMostrarBotonAprobar">
                                            <button class="SeparatorLeft boton1Style boton1" ng-Click="Aprobar_Click();" style="">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnAprobar" alt="Enviar" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Aprobar</span>
                                            </button>
                                        </div>

                                        <div class="boton ng-hide" ng-show="FlagMostrarBotonEnviar">
                                            <button class="SeparatorLeft boton1Style boton1" ng-Click="IniciarFlujo_Click();" style="">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnAceptar" alt="Enviar" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Enviar</span>
                                            </button>
                                        </div>
                                        <div class="boton ng-hide" ng-show="FlagMostrarBotonDescartar">
                                            <button class="SeparatorLeft boton1Style boton1" ng-Click="Descartar_Click();" style="width: 60px!important;">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnCancelar" alt="Descartar" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Descartar</span>
                                            </button>
                                        </div>

                                        <div class="boton ng-hide" ng-show="FlagMostrarBotonDeshabilitar">
                                            <button class="SeparatorLeft boton1Style boton1" ng-Click="Deshabilitar_Click();" style="width: 65px!important;">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnCancelar" alt="Deshabilitar" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Deshabilitar</span>
                                            </button>
                                        </div>
                                        <!--
              <div class="boton ng-hide" ng-show="FlagMostrarBotonHistorial">
                  <button class="SeparatorLeft boton1Style boton1" ng-Click="Historial_Click();" style="">
                      <span class="boton1Span">
                          <img class="boton1Img csBtnHistorial" alt="Historial" src="/bundles/d41d8cd98f00b204e9800998ecf8427e/faffabed-c58a-4d3d-94e3-5237ee4668c4/Images/formatmap32x32.png">
                      </span>
                      <span class="boton1txt">Historial</span>
                  </button>
              </div> -->
                                        <div class="boton">
                                            <button class="SeparatorLeft boton1Style boton1" ng-Click="Salir_Click();" style="">
                                                <span class="boton1Span">
                                                    <img class="boton1Img csBtnSalir" alt="Salir" src="/Images/formatmap32x32.png">
                                                </span>
                                                <span class="boton1txt">Salir</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div id="seccion-2">
                    <div>
                    <div class="block_cab block_cab_active">
                        <h2>
                            <span>Datos Mantenimiento</span>
                        </h2>
                        <h3></h3>
                        <div class="acordeon">
                        </div>
                    </div>
                    <form id="RegistroFichaFrm" name="RegistroFichaFrm" class="ng-pristine ng-invalid ng-invalid-required">
                    <div class="block_content" style="width: 100%">
                    <!------------------- 1 Seccion -------------------------------------------->
                    @*                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="col-md-12 row">
                                <div class="col-md-4">
                                    Nro Ficha
                                </div>
                                <div class="col-md-8">
                                    <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                           ng-model="$root.DatosFormulario.DatosFicha
.NumeroSolicitud"
                                      ng-disabled="$root.DatosFormulario.DatosFichaCargaInicial.HabilitadoNumeroSolicitud=='False' || FlagEditing==false">
                                    <div class="caja11 msgerror NumeroSolicitud">
                                        <span class="field-validation-valid msgerror" data-valmsg-for="root.DatosFormulario.DatosFicha
.NumeroSolicitud" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4">
                                Fecha Solicitud
                            </div>
                            <div class="col-md-8">
                                <input class="InputTEXT_04Fecha"
                                       maxlength="10" type="text"
                                       ng-model="$root.DatosFormulario.DatosFicha
.FechaSolicitud"
                                       data-bind="dateValue: $root.DatosFormulario.DatosFicha
.FechaSolicitud,datePattern: 'dd/MM/yyyy'"
                                       data-val="true"
                                       data-val-required="Fecha Solicitud es requerido."
                                       ng-enter="Enter()"
                                       data-val-date="El campo Fecha Solucitud debe ser una fecha."
                                       id="FechaSolicitud"
                                       name="$root.DatosFormulario.DatosFicha
.FechaSolicitud"
                                       required />
                                <div class="caja11 msgerror FechaSolicitud">
                                    <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.FechaSolicitud" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                        </div>
                     
                    </div>
                </div>*@
                    <!------------------- 2 Seccion -------------------------------------------->

                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="col-md-12 row">
                                    <div class="col-md-4">
                                        N° Mantenimiento
                                    </div>
                                    <div class="col-md-8">
                                        <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                               ng-model="$root.DatosFormulario.DatosFicha.NumeroMantenimiento" disabled>

                                        <input type="image" ng-disabled="FlagEditing==false"
                                               ng-click="BuscarMantenimiento_Click();" value="Buscar"
                                               src="\Images\buscar.png" class="" style="border-width: 0px; width: 25px; margin-bottom: -10px;">
                                        <div class="caja11 msgerror NumeroSolicitud">
                                            <span class="field-validation-valid msgerror" data-valmsg-for="root.DatosFormulario.DatosFicha
.NumeroSolicitud" data-valmsg-replace="true"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!------------------- 1 Seccion -------------------------------------------->
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="col-md-12 row">
                                    <div class="col-md-4">
                                        Descripcion Solicitud
                                    </div>
                                    <div class="col-md-8">
                                        <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                               ng-model="$root.DatosFormulario.DatosFicha.DescripcionSoliciud" disabled>
                                        <div class="caja11 msgerror NumeroSolicitud">
                                            <span class="field-validation-valid msgerror" data-valmsg-for="root.DatosFormulario.DatosFicha
.NumeroSolicitud" data-valmsg-replace="true"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="col-md-4">
                                    Descripcion Mantenimiento
                                </div>
                                <div class="col-md-8">
                                    <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                           ng-model="$root.DatosFormulario.DatosFicha.DescripcionMantenimiento" disabled=""/>
                                    <div class="caja11 msgerror FechaSolicitud">
                                        <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.FechaSolicitud" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!------------------- 2 Seccion -------------------------------------------->
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="col-md-12 row">
                                    <div class="col-md-4">
                                        Tipo Mantenimiento
                                    </div>
                                    <div class="col-md-8">
                                        <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                               ng-model="$root.DatosFormulario.DatosFicha.TipoMantenimiento" disabled="" />
                                        <div class="caja11 msgerror FechaSolicitud">
                                            <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.FechaSolicitud" data-valmsg-replace="true"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="col-md-12 row">
                                    <div class="col-md-4">
                                        Sede
                                    </div>
                                    <div class="col-md-8">
                                        <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                               ng-model="$root.DatosFormulario.DatosFicha.Sede" disabled="" />
                                        <div class="caja11 msgerror FechaSolicitud">
                                            <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.FechaSolicitud" data-valmsg-replace="true"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!------------------- 3 Seccion -------------------------------------------->
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="col-md-12 row">
                                    <div class="col-md-4">
                                        Área
                                    </div>
                                    <div class="col-md-8">
                                        <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                               ng-model="$root.DatosFormulario.DatosFicha.Area" disabled="" />
                                        <div class="caja11 msgerror FechaSolicitud">
                                            <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.FechaSolicitud" data-valmsg-replace="true"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*                       <div class="col-md-6">
                            <div class="col-md-12 row">
                                <div class="col-md-4">
                                    Estado
                                </div>
                                <div class="col-md-8">
                                    <select ng-model="$root.DatosFormulario.DatosFicha
.CodigoEstado"
                                            ng-options="estado.Codigo as estado.Descripcion for estado in $root.DatosFormulario.FiltrosBusquedaSolicitudCargaInicial.Estado"
                                            class="InputSELECT_01 ng-pristine ng-valid"
                                            id="$root.DatosFormulario.DatosFicha
.CodigoEstado"
                                            data-val="true"
                                            name="$root.DatosFormulario.DatosFicha
.CodigoEstado"
                                            ng-disabled="$root.DatosFormulario.FiltrosBusquedaSolicitudCargaInicial.HabilitadoEstado=='False'">
                                        <option value="" class="">[Seleccione]</option>
                                    </select>
                                    <div class="caja11 msgerror CodigoEstadoGeneral">
                                        <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.CodigoEstado" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                             </div>
                        </div>*@
                        </div>
                    </div>
                    <!------------------- 4 Seccion -------------------------------------------->
                    @*                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="col-md-12 row">
                                <div class="col-md-3">
                                    Descripcion
                                </div>
                                <div class="col-md-8">
                                     <textarea      class="InputTEXT_06" 
  													ng-model="$root.DatosFormulario.DatosFicha
.Descripcion"
  													id="$root.DatosFormulario.DatosFicha
.Descripcion"
   													data-val="true"
                                                    data-val-required="Descripcion es requerido."
                                                    name="$root.DatosFormulario.DatosFicha
.Descripcion"
  													ng-disabled="FlagEditing==false"
  													maxlength="1000"
                                                    required>
                                      </textarea>
                                    <div class="caja11 msgerror Descripcion">
                                        <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.Descrpcion" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>*@
                    </div>
                    </form>
                    </div>
                    </div>
                    <div id="seccion-3">
                    <div>
                    <div class="block_cab block_cab_active">
                        <h2>
                            <span>Datos Ficha Mantenimiento</span>
                        </h2>
                        <h3></h3>
                        <div class="acordeon">
                        </div>
                    </div>
                        <form id="RegistroFichaFrm" name="RegistroFichaFrm" class="ng-pristine ng-invalid ng-invalid-required">
                            <div class="block_content" style="width: 100%">


                                <!------------------- 1 Seccion -------------------------------------------->
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="col-md-12 row">
                                                <div class="col-md-4">
                                                    Descripcion Ficha
                                                </div>
                                                <div class="col-md-8">
                                                    <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                                           ng-model="$root.DatosFormulario.DatosFicha.DescripcionFicha">
                                                    <div class="caja11 msgerror NumeroSolicitud">
                                                        <span class="field-validation-valid msgerror" data-valmsg-for="root.DatosFormulario.DatosFicha
.NumeroSolicitud" data-valmsg-replace="true"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="col-md-4">
                                                Fecha Mantenimiento
                                            </div>
                                            <div class="col-md-8">
                                                <input class="InputTEXT_04Fecha"
                                                       maxlength="10" type="text"
                                                       ng-model="$root.DatosFormulario.DatosFicha.FechaMantenimiento"
                                                       data-bind="dateValue: $root.DatosFormulario.DatosFicha.FechaMantenimiento,datePattern: 'dd/MM/yyyy'"
                                                       data-val="true"
                                                       data-val-required="Fecha Mantenimiento es requerido."
                                                       ng-enter="Enter()"
                                                       data-val-date="El campo Fecha Mantenimiento debe ser una fecha."
                                                       id="FechaMantenimiento"
                                                       name="$root.DatosFormulario.DatosFicha.FechaMantenimiento"
                                                       required/>
                                                <div class="caja11 msgerror FechaMantenimiento">
                                                    <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.FechaSolicitud" data-valmsg-replace="true"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <!------------------- 2 Seccion -------------------------------------------->
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6" style="display:none;">
                                            <div class="col-md-12 row">
                                                <div class="col-md-4">
                                                    Hora Mantenimiento
                                                </div>
                                                <div class="col-md-8">
                                                  <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                           ng-model="$root.DatosFormulario.DatosFicha.HoraMantenimiento" />
                                                    <div class="caja11 msgerror CodigoTipoMantenimiento">
                                                        <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.CodigoTipoMantenimiento" data-valmsg-replace="true"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="col-md-12 row">
                                                <div class="col-md-4">
                                                    Número Técnicos
                                                </div>
                                                <div class="col-md-8">
                                                    <input class="InputTEXT_05  ng-pristine ng-valid" maxlength="70" type="text" ng-enter="Enter()"
                                           ng-model="$root.DatosFormulario.DatosFicha.NumeroTecnicos" />
                                                    <div class="caja11 msgerror CodigoSede">
                                                        <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosFicha
.CodigoSede" data-valmsg-replace="true"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <!------------------- 3 Seccion -------------------------------------------->


                            </div>
                        </form>

                    </div>
                    </div>
                    <div id="seccion-4">
                        <div style="display: none">0</div>
                        <div style="width: 100%; float: left">
                            <div class="block_cab block_cab_active">
                                <h2>
                                    <span>Lista de Actividades</span>
                                </h2>
                                <h3></h3>
                                <div class="acordeon">
                                </div>
                            </div>
                            <div class="block_menu block_content">
                                <div style="max-width: 100%; height: 100%">
                                    <div class="col-md-12 row">
                                        <div class="col-xs-12">
                                            <button class="SeparatorLeft boton1Style boton1" ng-click="AgregarActividad_Click();" style="width: 60px;" ng-disabled="FlagEditing==false">
                                                <span class="boton1Span">
                                                        <img class="boton1Img csBtnAgregar" alt="Agregar" src="/Images/formatmap32x32.png">
                                                    </span>
                                                <span class="boton1txt">Agregar</span>
                                            </button>
                                        </div>


                                    </div>
                                </div>
                            </div>
                            <div id="ContentListadoddefbf3b-5f51-47b0-a9d0-54a4cf5fdf65" class="block_content">
                                <div class="form_section" style="width: 100%">
                                    <table id="listaActividades"></table>
                                    <div id="pagerlistaActividades"></div>
                                </div>
                                <div class="caja11 msgerror ListaMantenimiento">
                                    <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosSolicitud.ListaMantenimiento" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="seccion-5">
                            <div style="display: none">0</div>
                            <div style="width: 100%; float: left">
                                <div class="block_cab block_cab_active">
                                    <h2>
                                        <span>Lista de Materiales</span>
                                    </h2>
                                    <h3></h3>
                                    <div class="acordeon">
                                    </div>
                                </div>
                                <div class="block_menu block_content">
                                    <div style="max-width: 100%; height: 100%">
                                        <div class="col-md-12 row">
                                            <div class="col-xs-12">
                                                <button class="SeparatorLeft boton1Style boton1" ng-click="AgregarMateriales_Click();" style="width: 60px;" ng-disabled="FlagEditing==false">
                                                    <span class="boton1Span">
                                                        <img class="boton1Img csBtnAgregar" alt="Agregar" src="/Images/formatmap32x32.png">
                                                    </span>
                                                    <span class="boton1txt">Agregar</span>
                                                </button>
                                            </div>


                                        </div>
                                    </div>
                                </div>
                                <div id="ContentListadoddefbf3b-5f51-47b0-a9d0-54a4cf5fdf6w5" class="block_content">
                                    <div class="form_section" style="width: 100%">
                                        <table id="listaMateriales"></table>
                                    <div id="pagerlistaMateriales"></div>
                                    </div>
                                    <div class="caja11 msgerror ListaMantenimiento">
                                        <span class="field-validation-valid msgerror" data-valmsg-for="$root.DatosFormulario.DatosSolicitud.ListaMantenimiento" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>


    function EliminarActividad(idActividad) {
        MiConfirm("¿Está seguro de eliminar la Actividad?.", function () {
            $('#listaActividades').jqGrid('delRowData', idActividad);
        });
    }
    function EliminarMaterial(idMaterial) {
        MiConfirm("¿Está seguro de eliminar el Material?.", function () {
            $('#listaMateriales').jqGrid('delRowData', idMaterial);
        });
    }
</script>